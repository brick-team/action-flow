## v1
flow表:
		id (流程id)
		name (流程名称)

action表：
		id
		flow_id (流程id)
		type (类型：RestApi、JavaApi)
		url (type为RestApi时 需存入url地址)
		method (type为JavaApi时 需存入java方法名)
		clazz (type为JavaApi时需存入java对象类型)

param表：
		id
		flow_id (流程id)
		action_id (action表id)
		type (类型：RestApi、JavaApi)
		in (type为RestApi时 需存入参数所在位置：body，url，formData)
		index (type为JavaApi时 参数位置索引值)
		clazz (type为JavaApi时需存入java对象类型)
		name  (参数名称)
		require (是否必填)
		value (参数值)

extract 表:
		id
		flow_id (流程id)
		action_id (action表id)
		param_id (参数表id)
		action_name (action名 是否有必要？)
		el_type (JSON_PATH方式...)
		el (取值表达式)

work 表：
		id
		flow_id (流程id)
		action_id (action表id)
		step (流程执行步骤)
		then_id (所属then节点id 可为空)
		cat_id (所属cat节点id 可为空)

watcher表：
		id
		flow_id (流程id)
		work_id (action表id)
		el_type (JSON_PATH方式...)
		el
		condition (判断条件)

then表：
		id
		flow_id (流程id)
		watcher_id

cat表：
		id
		flow_id (流程id)
		watcher_id

result表：
		id
		flow_id (流程id)
		parent_id (上级id 可为空)
		file_name (字段名)
		type (值类型)
		value (字段值)


===
问题：
1. 未解决文件模式的数据存储信息，文件名称字段缺失
2. 流程id不应该在每个表中出现，需要通过外部进行获取，从而提高复用率
3. 参数表分开制作成 REST_API 和 JAVA_METHOD 两张表，添加参数层级关系
4. extract 只关注了 action 相关的参数提取，没有关注 result中字段的提取
5. work 不具备操作 then cat 节点的能力，此能力由 watcher 进行提供，work 表需要与 watcher 建立关系。
    现在这个work节点设计携带flow_id，按我的理解在xml中work -> watcher -> then\cat 标签下的 work 标签也会携带 flow_id ，在实际操作中 then、cat标签下的work标签不应该具备flow_id。
    建议: flow 标签下的直属work节点一个表，后续为数据监控相关的work节点在做一个表。或者提供相关设计说明

8. then cat 表的处理逻辑不明确只看到了 flow 标签 watcher 标签，无法与work标签结合

6. watcher 新版本已经不存在 el 属性，该数据已经全部存储在 condition 中， work \ watcher \ then \ cat 结构不明确
7. result 缺少取值相关设计，建议通过绑定取值器，file_name 应该替换为 field_name


## v2
==
flow表:
		id (流程id)
		name (流程名称)

flow_action关系表：
		id
		flow_id (流程id)
		action_id

action表：
		id
		type (类型：RestApi、JavaApi)
		url (type为RestApi时 需存入url地址)
		method (type为JavaApi时 需存入java方法名)
		clazz (type为JavaApi时需存入java对象类型)

flow_action_param 关系表
		id
		flow_id (流程id)
		action_id (action表id)
		rest_param_id (rest_param表id)
		java_param_id (java_param表id)

rest_param 表：
		id
		parent_id (父级id)
		type (类型：RestApi、JavaApi)
		in (type为RestApi时 需存入参数所在位置：body，url，formData)
		name  (参数名称)
		require (是否必填)
		value (参数值)

java_param 表：
		id
		parent_id (父级id)
		type (类型：RestApi、JavaApi)
		index (type为JavaApi时 参数位置索引值)
		clazz (type为JavaApi时需存入java对象类型)
		name  (参数名称)
		require (是否必填)
		value (参数值)

flow_action_param_extract 关系表：
		id
		flow_id (流程id)
		action_id (action表id)
		param_type (RestApi、JavaApi)
		param_id (param表id)
		extract_id (extract表id)

extract 表:
		id
		action_name (action名 是否有必要？)
		step (result表取值时步骤字段)
		el_type (JSON_PATH方式...)
		el (取值表达式)

flow_work 关系表：
		id
		flow_id (流程id)
		work_id (work表id)

work 表：
		id
		action_id (action表id)
		watcher_id (watcher表id  //是否必要？存在then cat表关系是否就可？)
		step (流程执行步骤)
		then_id (所属then节点id 可为空)
		cat_id (所属cat节点id 可为空)

flow_watcher 关系表：
		id
		flow_id (流程id)
		watcher_id (watcher表id)

watcher表：
		id
		work_id (action表id)
		el_type (JSON_PATH方式...)
		condition (判断条件)

flow_then关系表：
		id
		flow_id (流程id)
		then_id (then表id)

then表：
		id
		work_id
		watcher_id

flow_cat关系表：
		id
		flow_id (流程id)
		cat_id (cat表id)

cat表：
		id
		work_id
		watcher_id

flow_result关系表：
		id
		flow_id (流程id)
		result_id (result表id)

flow_extract_result关系表：
		id
		result_id (result表id)
		extract_id (extract表id)

result表：
		id
		parent_id (上级id 可为空)
		field_name (字段名)
		type (值类型)
		value (字段值)



问题：
1. action 表和 flow_action_param 、   rest_param 、   java_param 之间不需要通过 flow_action_param 表维持关系。直接将 action 的id放在两张 
   param 表上即可。对应第一版本修改意见[3]
   
2. rest_param、java_param 不需要type字段。表名已知类型。

3. flow_action_param_extract 表的使用应该绑定到work上，action允许复用的情况下如果在这个表中设置数据那么action不论执行多少次都将得到一个结果。

4. 表extract是独立表，不需要存放action_name，即便要存储也应该存储action_id 而不是名称。

5. 表work中可以不存储watcher_id，如果不想存储请按照 af_work_cz 表设计进行参考。在第一版本修改意见中已经明确指出work标签无法与cat then标签产生直接关系，他们的关系是交给watcher维护的。

6. flow_cat\flow_then的价值不明确

   
   
==